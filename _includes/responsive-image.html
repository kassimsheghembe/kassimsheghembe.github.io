{% comment %}
Responsive Image Component
Usage: {% include responsive-image.html src="/path/to/image.jpg" alt="Alt text" class="optional-class" %}
{% endcomment %}

{% assign image_path = include.src %}
{% assign alt_text = include.alt | default: "" %}
{% assign css_class = include.class | default: "" %}
{% assign loading = include.loading | default: "lazy" %}

{% comment %} Extract file extension and base path {% endcomment %}
{% assign path_parts = image_path | split: "." %}
{% assign extension = path_parts.last %}
{% assign base_path = path_parts | pop | join: "." %}

<picture class="responsive-image {{ css_class }}">
  {% comment %} WebP format for modern browsers {% endcomment %}
  <source 
    srcset="{{ base_path }}-thumbnail.webp 300w,
            {{ base_path }}-medium.webp 600w,
            {{ base_path }}-large.webp 1200w"
    sizes="(max-width: 768px) 100vw, (max-width: 1024px) 50vw, 33vw"
    type="image/webp">
  
  {% comment %} Fallback for browsers that don't support WebP {% endcomment %}
  <source 
    srcset="{{ base_path }}-thumbnail.{{ extension }} 300w,
            {{ base_path }}-medium.{{ extension }} 600w,
            {{ base_path }}-large.{{ extension }} 1200w"
    sizes="(max-width: 768px) 100vw, (max-width: 1024px) 50vw, 33vw">
  
  {% comment %} Default image for older browsers {% endcomment %}
  <img 
    src="{{ base_path }}-medium.{{ extension }}" 
    alt="{{ alt_text }}"
    loading="{{ loading }}"
    class="img-fluid">
</picture>